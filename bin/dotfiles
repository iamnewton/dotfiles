#!/usr/bin/env bash
set -euo pipefail

# Colors
RED="\033[1;31m"
GREEN="\033[1;32m"
BLUE="\033[1;34m"
RESET="\033[0m"
LOG_PREFIX="[${BLUE}dotfiles${RESET}]"

log() {
	echo -e "${LOG_PREFIX}: ${BLUE}$1${RESET}"
}

error() {
	echo -e "${LOG_PREFIX}: ‚ùå ${RED}$1${RESET}" >&2
}

main() {
	if ! command -v nvim &>/dev/null; then
		error "NeoVim not found. Install it via Homebrew: brew install nvim"
		exit 1
	fi

	if [[ -z "${DOTFILES_DIR:-}" ]]; then
		error "DOTFILES_DIR is not set. Please export it before running."
		exit 1
	fi

	log "üìÅ Opening dotfiles in nvim at: $DOTFILES_DIR"
	cd "$DOTFILES_DIR"
	nvim
}

main
